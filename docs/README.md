# 4주차: 크리스마스 프로모션 - 구현할 기능 및 테스트 목록 정리
1. [입력 단계 기능 요구사항](#입력-단계-기능-요구사항)
2. [총주문개수 산정 단계 기능 요구사항](#총주문개수-산정-단계-기능-요구사항)
3. [출력 단계 기능 요구사항](#출력-단계-기능-요구사항)
4. [유효성 검사 관련 테스트 목록](#유효성-검사-관련-테스트-목록)


---

## 입력 단계 기능 요구사항
### 입력 단계 공통
* 최초 실행 시 `안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.` 메시지 출력

### 식당 예상 방문 날짜 입력
* `12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)` 메시지 출력
* 방문 날짜는 문자열로 입력
  * 방문할 날짜로 1 이상 31 이하의 숫자 입력
  * 잘못된 입력의 조건
    * 입력값이 빈 문자열이거나 공백문자가 사용된 문자열인 경우 예외 처리
    * 정수로 변환할 수 없는 문자열인 경우
    * 변환된 정수가 1 이상 31 이하의 정수가 아닌 경우
  * 잘못된 입력값일 경우 예외 처리 
    * IllegalArgumentException 발생 후 `[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요.` 메시지 출력
    * 방문 날짜 입력을 처음부터 다시 수행

### 주문할 메뉴 입력
* `주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,타파스-1,제로콜라-1)` 메시지 출력
* 주문할 메뉴와 그 개수를 입력
* 잘못된 입력의 조건
  * 잘못된 입력일 경우 IllegalArgumentException 발생
  * 입력값이 빈 문자열이거나 공백문자가 사용된 문자열인 경우 예외 처리
  * 각 메뉴를 구분하는 쉼표(,)가 문자열의 처음이나 끝에 사용되었거나 연속으로 사용된 경우
  * 아래의 경우 `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.` 메시지 출력
    * 메뉴의 형식이 예시와 다른 경우
      * 쉼표(,)를 잘못 사용한 경우
        * 입력된 문자열의 처음 혹은 마지막이 쉼표(,)로 끝나는 경우 
        * 쉼표(,)를 연속으로 사용한 경우
      * 쉼표(,)를 통해 분리된 각각의 토큰이 `(메뉴명)-n`과 같은 형식이 아닌 경우(n = 해당 메뉴의 개수)
    * 메뉴판에 없는 메뉴를 입력한 경우
    * 주문한 메뉴의 개수가 1 이상의 숫자가 아닌 경우
    * 중복된 메뉴를 입력한 경우
  * 주문 메뉴와 주문 개수에 관한 이벤트 주의사항에 위배되는 경우
    * 총 주문개수가 20개를 초과한 경우 `[ERROR] 총 주문 개수가 20개를 초과합니다.` 메시지 출력
    * 음료만 주문한 경우 `[ERROR] 음료만 주문할 수 없습니다.` 메시지 출력
* 잘못된 입력값일 경우 예외 처리 방법
  * 에러 메시지 출력 후, 주문할 메뉴와 그 개수의 입력을 처음부터 다시 수행
  * 주문 메뉴와 그 개수에 관한 Map을 전부 비운 후 재입력
* 주문할 메뉴와 그 개수가 유효하면 Map 형식으로 저장

---

## 총주문개수 산정 단계 기능 요구사항
### 할인 전 총주문 금액 및 총주문 개수 산정
* 총주문개수 = 각 메뉴별 주문 개수의 총합
  * e.g. 시저샐러드-1, 티본스테이크-1, 크리스마스파스타-1, 제로콜라-3, 아이스크림-1의 총개수는 7개
* 할인 전 총주문금액 = (주문한 메뉴 1개의 가격 * 주문 개수)의 총합


---

## 출력 단계 기능 요구사항
### 주문 메뉴 및 총주문금액 출력 단계
#### 주문 메뉴 출력
* `<주문 메뉴>` 타이틀 출력
* 주문 메뉴 출력 순서 설정은 자유
* `(주문 메뉴) n개`와 같은 형식으로 출력(n = 해당 메뉴를 주문한 개수)

#### 할인 전 총주문금액 출력
* `<할인 전 총주문금액>` 타이틀 출력
* 금액은 천 단위마다 쉼표(,)로 구분
* `n원`과 같은 형식으로 출력
  * n은 양수이고, 천 단위마다 쉼표(,)로 구분


### 할인 금액 및 총혜택금액 산정
#### 각 이벤트별 혜택 적용 및 할인금액 산정 방법 
##### 이벤트 적용 조건
  * 총주문금액이 10,000원 이상
##### 이벤트별 할인금액 공통
  * 각 이벤트별 할인금액, 증정 메뉴 가격은 음수로 저장됨
  * 총혜택금액 = 총할인금액 + 증정 메뉴 가격의 총합
  * 총할인금액 = 총혜택금액 - 증정 메뉴 가격의 총합
##### 크리스마스 디데이 할인
  * 1일부터 25일까지 적용 가능한 이벤트
  * 할인 금액: 1000 + 100*(입력날짜-1)(최소 1000원, 최대 3400원 할인)
  * 26일 이후부터는 할인 혜택 미적용
##### 평일 할인
  * 1일부터 31일까지 적용 가능한 이벤트
  * 평일: 입력 날짜를 7로 나눈 나머지가 1, 2 이외의 숫자인 경우(일요일 ~ 목요일)
  * 할인 금액: 2,023*(주문한 디저트 메뉴 개수의 총합)
  * 평일에 디저트 메뉴 이외의 음식을 주문한 경우 혜택 미적용
##### 주말 할인
  * 1일부터 31일까지 적용 가능한 이벤트
  * 주말: 입력 날짜를 7로 나눈 나머지가 1 또는 2인 경우(금요일, 토요일)
    * 할인 금액: 2,023*(주문한 메인 메뉴 개수의 총합)
  * 주말에 메인 메뉴 이외의 음식을 주문한 경우 혜택 미적용
##### 특별 할인
  * 1일부터 31일 사이 매주 일요일 또는 크리스마스(25일)에만 적용
  * 일요일 = 입력 날짜를 7로 나눈 나머지가 3
  * 할인 금액: 1,000원
  * 일요일이 아니면서 크리스마스도 아니면 헤택 미적용 
##### 증정 이벤트
  * 1일부터 31일까지 적용 가능한 이벤트
  * 총주문금액이 120,000원 이상일 때, 샴페인 1개(25,000원) 증정
  * 할인 금액에는 미반영, 총혜택금액에는 반영
  * 총주문금액이 120,000원 미만인 경우 혜택 미적용
##### 혜택이 전혀 적용되지 않는 경우
  * 총주문금액이 10,000원 미만
  * 총주문금액이 10,000원 이상 120,000원 미만이면서 다음의 상황인 경우
    * 26일 이후, 일요일이 아닌 평일에 디저트 메뉴 이외의 음식(들)만 주문
    * 26일 이후, 주말에 메인 메뉴 이외의 음식(만) 주문

### 이벤트 적용 결과 출력
#### 증정 메뉴
* `<증정 메뉴>` 타이틀 출력
* 총주문금액이 120,000원 이상인 경우 `(메뉴명) n개`와 같은 형식으로 출력
  * 주어진 조건에서는 `샴페인 1개` 출력
* 총주문금액이 120,000원 미만이면 `없음` 출력

#### 혜택 내역
* `<혜택 내역>` 타이틀 출력
* 총주문금액이 10,000원 이상인 경우 `(이벤트명): (할인금액)원`과 같은 형식으로 출력
  * 할인 금액은 음수이고, 천 단위마다 쉼표(,)로 구분
* 총주문금액이 10,000원 미만인 경우 `없음` 출력
* 혜택 내역 출력 순서는 자유롭게 설정

#### 총혜택 금액
* `<총혜택 금액>` 타이틀 출력
* 총혜택금액 = 총할인금액 + (증정 메뉴 금액 * 개수)
* `n원`으로 출력
  * n은 양수이고, 천 단위마다 쉼표(,)로 구분

#### 할인 후 예상 결제 금액
* `<할인 후 예상 결제 금액>` 타이틀 출력
* 할인 후 예상 결제 금액: (할인 전 총주문금액) - (총할인금액)
* `n원`으로 출력
  * n은 양수이고, 천 단위마다 쉼표(,)로 구분

#### 12월 이벤트 배지
* `12월 이벤트 배지` 출력
  * 총혜택금액이 5,000원 미만: `없음` 출력
  * 총혜택금액이 5,000원 이상 10,000원 미만: `별` 출력
  * 총혜택금액이 10,000원 이상 20,000원 이상: `트리` 출력
  * 총혜택금액이 20,000원 이상: `산타` 출력


---


## 유효성 검사 관련 테스트 목록
### 전체 입력 문자열 유효성 검사
* 입력된 문자열이 빈 문자열 혹은 공백문자가 포함된 문자열인지 검사
* 주문할 메뉴 입력 시 쉼표(,)가 다음처럼 잘못 사용될 시 예외가 발생하는지 검사
  * 쉼표(,)가 문자열의 처음 또는 마지막에 사용되었는가?
  * 쉼표가 연속으로 사용되었는가?
### 날짜 유효성 검사
* 입력된 문자열을 정수로 변환할 수 있는가?
* 정수로 변환했을 시, 1 이상 31 이하의 숫자인가?
### 주문 형식 유효성 검사
* 쉼표를 기준으로 입력된 문자열을 파싱하여 생성한 각각의 주문 토큰의 형식 검사
  * 각 문자열 토큰마다 하이픈(-)이 사용되었는가?
    * 한 개의 문자열 토큰이라도 하이픈(-)이 없으면 곧바로 예외 발생
    * 하이픈이 연속으로 사용된 경우에도 예외 발생
  * 하이픈을 기준으로 다시 파싱했을 시 아래 기준을 만족하는가?
    * 하이픈 앞쪽 토큰
      * 주문 가능한 메뉴인가?
      * 같은 메뉴를 중복해서 주문하지 않았는가?
    * 하이픈 뒤쪽 토큰
      * 해당 문자열 토큰을 1 이상의 정수로 변환 가능한가?
### 주문 규칙 관련 유효성 검사
* 주문한 메뉴의 개수의 총합이 20개를 초과하였는가?
* 음료 메뉴만 주문하지 않았는가?


